# Clean out any old Ctrl-h/j/k/l bindings from root & prefix tables
unbind -n C-h
unbind -n C-j
unbind -n C-k
unbind -n C-l
unbind C-h
unbind C-j
unbind C-k
unbind C-l
##### Navigation: use Alt/Option instead of Ctrl #####
bind -n M-h select-pane -L
bind -n M-l select-pane -R
bind -n M-j select-pane -D
bind -n M-k select-pane -U
# Optional: also support Alt + Arrow keys
bind -n M-Left  select-pane -L
bind -n M-Right select-pane -R
bind -n M-Down  select-pane -D
bind -n M-Up    select-pane -U

##### Copy mode: Vim-style #####
setw -g mode-keys vi

# Shift+V: enter copy mode and start linewise selection immediately
bind-key V copy-mode \; send -X select-line

# Yank like Vim: 'y' in copy-mode-vi copies and exits (OSC52 -> local clipboard)
set -g set-clipboard on
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "tmux save-buffer - | tmux display-message -p -F \"\\033]52;c;$(base64 -w0)\\a\""

##### Status bar — layout & refresh #####
set -g status on
set -g status-interval 10
set -g status-bg colour236
set -g status-fg white

# Put window list in the center
set -g status-justify centre
set -g status-left-length 40
set -g status-right-length 120

##### Left: session name #####
set -g status-left "#[fg=green,bold]#S#[default] "

##### Center: window list #####
set -g window-status-format " #[fg=yellow]#I:#W#[default] "
set -g window-status-current-format " #[fg=black,bg=yellow,bold]#I:#W#[default] "
set -g window-status-separator " "

##### Right: CPU | MEM | host #####
# CPU: robust vmstat parser (find 'id' column, 100 - idle)
# MEM: used = total - available
set -g status-right "#[fg=cyan]CPU #[fg=white]#(vmstat 1 2 | awk 'NR==2{for(i=1;i<=NF;i++) if(\$i==\"id\") c=i; next} NF{v=\$c} END{if(v==\"\") print \"…\"; else printf \"%d%%\", 100-v}') \
 #[fg=cyan]| MEM #[fg=white]#(free -m | awk '/Mem:/ {used=\$2-\$7; printf \"%.1f/%.1fG (%d%%)\", used/1024, \$2/1024, (used*100/\$2)}') \
 #[fg=cyan]| #[fg=white]#h"
